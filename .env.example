# ==============================================================================
# Enterprise Spring Microservices Template - Environment Configuration
# ==============================================================================
# Copy this file to .env and update values for your environment.
# NEVER commit .env to version control!
#
# For local development, the default values work out of the box.
# For production, all values marked REQUIRED must be set.
# ==============================================================================

# ------------------------------------------------------------------------------
# Keycloak Configuration
# ------------------------------------------------------------------------------
KEYCLOAK_ISSUER_URI=http://localhost:8080/realms/my-realm
KEYCLOAK_SERVER_URL=http://localhost:8080
KEYCLOAK_REALM=my-realm

# Keycloak Admin Console (for docker-compose)
KEYCLOAK_ADMIN_USER=admin
KEYCLOAK_ADMIN_PASSWORD=changeme              # REQUIRED: Change in production!

# Keycloak Database
KEYCLOAK_DB_USER=keycloak
KEYCLOAK_DB_PASSWORD=changeme                 # REQUIRED: Change in production!

# ------------------------------------------------------------------------------
# BFF Service Configuration
# ------------------------------------------------------------------------------
# OAuth2 Client Credentials (must match Keycloak client configuration)
KEYCLOAK_CLIENT_ID=bff-client
KEYCLOAK_CLIENT_SECRET=changeme               # REQUIRED: Change in production!

# JWT Signing Key for BFF Session Tokens
# REQUIRED: Generate with: openssl genpkey -algorithm RSA -out private_key.pem -pkeyopt rsa_keygen_bits:2048
# Then paste the contents here (single line, or use file reference)
BFF_JWT_SIGNING_KEY=

# BFF JWT Issuer (your domain)
BFF_JWT_ISSUER=https://bff.example.com

# Cookie Security (set to true in production with HTTPS)
BFF_COOKIE_SECURE=false

# ------------------------------------------------------------------------------
# Keycloak Admin Service Configuration
# ------------------------------------------------------------------------------
KEYCLOAK_ADMIN_CLIENT_ID=admin-service-client
KEYCLOAK_ADMIN_CLIENT_SECRET=changeme         # REQUIRED: Change in production!

# ------------------------------------------------------------------------------
# Database Configuration
# ------------------------------------------------------------------------------
# Profile Service Database
PROFILE_DB_USER=profile_user
PROFILE_DB_PASSWORD=changeme                  # REQUIRED: Change in production!

# Order Service Database
ORDER_DB_USER=order_user
ORDER_DB_PASSWORD=changeme                    # REQUIRED: Change in production!

# ------------------------------------------------------------------------------
# Infrastructure
# ------------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379

# ------------------------------------------------------------------------------
# Service URLs (for containerized deployments)
# ------------------------------------------------------------------------------
GATEWAY_URL=http://127.0.0.1:8888
FRONTEND_URL=http://localhost:4200
CORS_ALLOWED_ORIGINS=http://localhost:4200
PROFILE_SERVICE_URL=http://127.0.0.1:8082
ORDER_SERVICE_URL=http://127.0.0.1:8083
ADMIN_SERVICE_URL=http://127.0.0.1:8084
KEYCLOAK_ADMIN_SERVICE_URL=http://localhost:8084/api
REGISTRATION_CONFIRMATION_URL=http://localhost:4200/confirm

# ------------------------------------------------------------------------------
# Observability
# ------------------------------------------------------------------------------
# Reduce sampling in production (0.1 = 10% of requests traced)
TRACING_SAMPLING_PROBABILITY=1.0
ZIPKIN_ENDPOINT=http://localhost:9411/api/v2/spans
LOKI_URL=http://localhost:3100/loki/api/v1/push

# ------------------------------------------------------------------------------
# Development Settings
# ------------------------------------------------------------------------------
# Set to true for SQL query logging (disable in production)
JPA_SHOW_SQL=false
